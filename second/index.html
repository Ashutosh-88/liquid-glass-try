<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Frosted Glass Card</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Unified Music Player with Playlist -->
    <div class="container">
      <div class="glass-container glass-container--unified">
        <div class="glass-filter"></div>
        <div class="glass-overlay"></div>
        <div class="glass-specular"></div>
        <div class="glass-content glass-content--unified">
          <!-- Playlist Section -->
          <div class="playlist">
            <h2 class="playlist__title">Arijit Playlist</h2>
            <div class="playlist__items">
              <div class="playlist__item playlist__item--active">
                <img
                  class="playlist__item__img"
                  src="https://images.unsplash.com/photo-1619983081593-e2ba5b543168?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE3NDk1NzAwNDV8&ixlib=rb-4.1.0&q=80&w=80"
                  alt=""
                />
                <div class="playlist__item__info">
                  <h4 class="playlist__item__title">Tum Hi Ho</h4>
                  <span class="playlist__item__artist">Arijit Singh</span>
                </div>
                <span class="playlist__item__duration">4:22</span>
              </div>

              <div class="playlist__item">
                <img
                  class="playlist__item__img"
                  src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHNlYXJjaHwxfHxtdXNpY3xlbnwwfHx8fDE3MDk1NzAwNDV8&ixlib=rb-4.1.0&q=80&w=80"
                  alt=""
                />
                <div class="playlist__item__info">
                  <h4 class="playlist__item__title">Channa Mereya</h4>
                  <span class="playlist__item__artist">Arijit Singh</span>
                </div>
                <span class="playlist__item__duration">4:49</span>
              </div>

              <div class="playlist__item">
                <img
                  class="playlist__item__img"
                  src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHNlYXJjaHwyfHxtdXNpY3xlbnwwfHx8fDE3MDk1NzAwNDV8&ixlib=rb-4.1.0&q=80&w=80"
                  alt=""
                />
                <div class="playlist__item__info">
                  <h4 class="playlist__item__title">Raabta</h4>
                  <span class="playlist__item__artist">Arijit Singh</span>
                </div>
                <span class="playlist__item__duration">4:05</span>
              </div>

              <div class="playlist__item">
                <img
                  class="playlist__item__img"
                  src="https://images.unsplash.com/photo-1487180144351-b8472da7d491?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHNlYXJjaHwzfHxtdXNpY3xlbnwwfHx8fDE3MDk1NzAwNDV8&ixlib=rb-4.1.0&q=80&w=80"
                  alt=""
                />
                <div class="playlist__item__info">
                  <h4 class="playlist__item__title">Kesariya</h4>
                  <span class="playlist__item__artist">Arijit Singh</span>
                </div>
                <span class="playlist__item__duration">4:28</span>
              </div>
            </div>
          </div>

          <!-- Separator -->
          <div class="separator"></div>

          <!-- Player Controls Section -->
          <div class="player">
            <div class="player__thumb">
              <img
                class="player__img"
                src="https://images.unsplash.com/photo-1619983081593-e2ba5b543168?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE3NDk1NzAwNDV8&ixlib=rb-4.1.0&q=80&w=400"
                alt=""
              />
              <div class="player__legend">
                <h3 class="player__legend__title">Tum Hi Ho</h3>
                <span class="player__legend__sub-title">Arijit Singh</span>
              </div>
            </div>

            <div class="player__controls">
              <div class="player__controls__play">
                <svg viewBox="0 0 448 512" width="24" title="play">
                  <path
                    fill="white"
                    d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"
                  />
                </svg>
              </div>

              <div class="player__controls__ff">
                <svg viewBox="0 0 448 512" width="24" title="play">
                  <path
                    fill="white"
                    d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"
                  />
                </svg>

                <svg viewBox="0 0 448 512" width="24" title="play">
                  <path
                    fill="white"
                    d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"
                  />
                </svg>
              </div>
            </div>
          </div>
          <p
            style="color: rgba(255, 255, 255, 1); font-size: 0.9rem; margin: 0"
          >
            Drag anywhere to move
          </p>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="glass-container">
        <div class="glass-filter"></div>
        <div class="glass-overlay"></div>
        <div class="glass-specular"></div>

        <!-- SVG FILTER DEFINITION -->
        <svg style="display: none">
          <filter id="lg-dist" x="0%" y="0%" width="100%" height="100%">
            <feTurbulence
              type="fractalNoise"
              baseFrequency="0.008 0.008"
              numOctaves="2"
              seed="92"
              result="noise"
            />
            <feGaussianBlur in="noise" stdDeviation="2" result="blurred" />
            <feDisplacementMap
              in="SourceGraphic"
              in2="blurred"
              scale="70"
              xChannelSelector="R"
              yChannelSelector="G"
            />
          </filter>
        </svg>
      </div>
    </div>

    <script>
      // Make the glass container draggable
      function makeDraggable(element) {
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        element.addEventListener("mousedown", dragStart);
        document.addEventListener("mousemove", drag);
        document.addEventListener("mouseup", dragEnd);

        // Touch events for mobile
        element.addEventListener("touchstart", dragStart, { passive: false });
        document.addEventListener("touchmove", drag, { passive: false });
        document.addEventListener("touchend", dragEnd);

        function dragStart(e) {
          // Don't drag if clicking on interactive elements
          if (
            e.target.closest(".playlist__item") ||
            e.target.closest(".player__controls") ||
            e.target.tagName === "IMG"
          ) {
            return;
          }

          if (e.type === "touchstart") {
            initialX = e.touches[0].clientX - xOffset;
            initialY = e.touches[0].clientY - yOffset;
          } else {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;
          }

          if (e.target === element || element.contains(e.target)) {
            isDragging = true;
            element.style.zIndex = "1000";
            element.style.cursor = "grabbing";

            // Add dragging class for additional styling
            element.classList.add("dragging");
          }
        }

        function drag(e) {
          if (isDragging) {
            e.preventDefault();

            if (e.type === "touchmove") {
              currentX = e.touches[0].clientX - initialX;
              currentY = e.touches[0].clientY - initialY;
            } else {
              currentX = e.clientX - initialX;
              currentY = e.clientY - initialY;
            }

            xOffset = currentX;
            yOffset = currentY;

            setTranslate(currentX, currentY, element);
          }
        }

        function dragEnd() {
          if (isDragging) {
            initialX = currentX;
            initialY = currentY;
            isDragging = false;
            element.style.zIndex = "auto";
            element.style.cursor = "grab";

            // Remove dragging class
            element.classList.remove("dragging");
          }
        }

        function setTranslate(xPos, yPos, el) {
          // Preserve the original centering transform and add the drag offset
          el.style.transform = `translate(calc(-50% + ${xPos}px), calc(-50% + ${yPos}px))`;
        }
      }

      // Function to update the player with selected song
      function updatePlayer(songTitle, artist, imgSrc) {
        const playerTitle = document.querySelector(".player__legend__title");
        const playerArtist = document.querySelector(
          ".player__legend__sub-title"
        );
        const playerImg = document.querySelector(".player__img");

        if (playerTitle) playerTitle.textContent = songTitle;
        if (playerArtist) playerArtist.textContent = artist;
        if (playerImg) playerImg.src = imgSrc.replace("w=80", "w=400"); // Higher quality for player
      }

      // Initialize draggable functionality when DOM is loaded
      document.addEventListener("DOMContentLoaded", function () {
        const glassContainer = document.querySelector(
          ".glass-container--unified"
        );
        if (glassContainer) {
          makeDraggable(glassContainer);
        }

        // Add click event listeners to playlist items
        const playlistItems = document.querySelectorAll(".playlist__item");
        playlistItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            // Remove active class from all items
            playlistItems.forEach((item) =>
              item.classList.remove("playlist__item--active")
            );

            // Add active class to clicked item
            this.classList.add("playlist__item--active");

            // Get song details
            const songTitle = this.querySelector(
              ".playlist__item__title"
            ).textContent;
            const artist = this.querySelector(
              ".playlist__item__artist"
            ).textContent;
            const imgSrc = this.querySelector(".playlist__item__img").src;

            // Update player
            updatePlayer(songTitle, artist, imgSrc);

            // Prevent event bubbling to avoid dragging
            e.stopPropagation();
          });
        });
      });
    </script>
  </body>
</html>
